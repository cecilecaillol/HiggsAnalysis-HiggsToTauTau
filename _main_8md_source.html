<!-- HTML header for doxygen 1.8.6-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<link href='http://fonts.googleapis.com/css?family=Open+Sans:400,600' rel='stylesheet' type='text/css'>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>CombineHarvester: docs/Main.md Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 70px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">CombineHarvester
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.8 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('_main_8md.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">docs/Main.md</div>  </div>
</div><!--header-->
<div class="contents">
<a href="_main_8md.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;Introduction {#mainpage}</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;========================</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;</div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;[TOC]</div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;</div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;Build System {#build}</div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;=====================</div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;The code within the directory `CombineHarvester` is organised into a set of packages, each contained within a subdirectory, that produce shared libraries and executable programs. Currently there is just one package: `CombineHarvester/CombineTools`, which contains the core part of this framework and some example programs. In the future, each analysis will create their own package where all the specific datacard configuration, plotting routines and other scripts can be stored and developed. While the CMSSW environment is required to use this framework, the source code is not compiled with scram but rather using a make-based build system. Each package should contain at least this standard set of folders which are used by the build system:</div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;</div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;    makefile      : symlink to CombineHarvester/mk/makefile</div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;    Rules.mk      : makefile fragment to store list of subpackages and dependencies</div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;    interface/    : header files</div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;    src/          : source code (.cc) to be compiled to the shared library</div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;    obj/          : used by the build system</div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;    lib/          : used by the build system</div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;    test/         : code for executable programs (.cpp)</div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;    bin/          : programs compiled from test directory located here</div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;</div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160; The `makefile` is located in `CombineHarvester/mk`, with a symbolic link added to the root directory of each package. This defines a number of special targets that can be built by running: `make [target]`</div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;</div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;  * `make dir` or just `make`: Only compile the code in the current directory, including the minimum set of dependencies in other packages if necessary.</div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;  * `make tree`: Compile the code in the current directory, and recursively into all sub-directories starting from this one (as defined in each `Rules.mk` file)</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;  * `make all`: Compile every package recursively starting from the top directory</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;  * `make clean`: Removes every file in the `bin`, `obj` and `lib` directories in the current package</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;  * `make clean_tree`: Also cleans packages in sub-directories</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;  * `make clean_all`: Clean every package recursively starting from the top directory</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;  * `make bin/[program]` Shortcut target for each executable in the current directory. This provides a quick way to update a single program.</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;On machines with multiple processor cores add the `-j[n]` option to compile with *n* threads. By default the makefile will just print a summary of each operation to the screen. To print the full command for each step add the option `V=1`. The option `DEBUG=1` can also be added which will cause make to print a list of the targets it finds as it scans directories.</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;A first example {#ex-first}</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;===========================</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;Have a look at the file CombineTools/test/Example.cpp, this contains detailed comments on some of the basic datacard-creation features. The program `CombineTools/bin/Example` can be run without any options.</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;\warning You must first ensure the [auxiliaries](https://github.com/roger-wolf/HiggsAnalysis-HiggsToTauTau-auxiliaries) repository is located at `$CMSSW_BASE/src/auxiliaries` and up-to-date. The input root files will be sourced from here.</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;Example: SM Legacy Analysis {#ex-sm-legacy}</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;===========================================</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;The program `CombineTools/bin/SMLegacyExample` creates a set of datacards that mirror those used in HIG-13-004. It is intended as a more complex example of several steps in the datacard creation process:</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;  * Defining analysis categories, signal and background processes</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;  * Adding systematic uncertainties (see `CombineTools/src/HttSystematics_SMLegacy.cc`)</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;  * Extracting the corresponding histograms</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;  * Scaling signal rates to the SM cross sections</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;  * Applying bin-by-bin merging and creating uncertainties</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;  * Pruning the set of bin-by-bin nuisances</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;  * Writing the datacard `.txt` and `.root` files</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;Example: MSSM Yield Tables {#ex-mssm-table}</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;===========================================</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;The example script `CombineTools/scripts/yield_tables_mssm_example.sh` uses the program `CombineTools/test/MSSMYieldTable.cpp` to produce the tables included in HIG-13-021. To use it you must first copy this folder containing the input datacards:</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    cd CombineTools</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    cp -r /afs/cern.ch/work/a/agilbert/public/CombineTools/data/mssm-paper-cmb ./data/</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;</div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.6-->
<!-- start footer part -->
</body>
</html>
